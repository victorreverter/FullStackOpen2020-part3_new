{"version":3,"sources":["components/Filter.js","components/PersonForm.js","components/Persons.js","services/persons.js","components/Notification.js","App.js","index.js"],"names":["Filter","handleSearch","handleSearchStop","onChange","onBlur","PersonForm","addPerson","newName","handleNameChange","newNumber","handleNumberChange","onSubmit","value","required","type","Persons","persons","searchResult","handleDeletePerson","style","listStyle","padding","length","map","person","key","name","number","id","onClick","baseUrl","axios","get","then","response","data","newObject","post","delete","put","Notification","message","className","content","App","useState","setPersons","setNewName","setNewNumber","setSearchResult","setMessage","useEffect","personService","initialPersons","showMessage","setTimeout","event","console","log","target","searchTerm","filter","toLowerCase","includes","preventDefault","personObject","isFound","some","toUpdate","changeNumberObject","window","confirm","idForUpdate","returnedPerson","catch","error","errorMessage","addNewNumber","concat","personToDelete","deletedPerson","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.b282ba8f.chunk.js","sourcesContent":["import React from 'react'\r\n\r\nconst Filter = ({ handleSearch, handleSearchStop }) => {\r\n  return (\r\n    <div>filter shown with\r\n      <input onChange={handleSearch} onBlur={handleSearchStop}/>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Filter","import React from \"react\";\r\n\r\nconst PersonForm = ({\r\n  addPerson,\r\n  newName,\r\n  handleNameChange,\r\n  newNumber,\r\n  handleNumberChange,\r\n}) => {\r\n  return (\r\n    <div>\r\n      <form onSubmit={addPerson}>\r\n        <div>\r\n          name:{\" \"}\r\n          <input value={newName} required={true} onChange={handleNameChange} />\r\n        </div>\r\n        <div>\r\n          number:{\" \"}\r\n          <input\r\n            value={newNumber}\r\n            required={true}\r\n            onChange={handleNumberChange}\r\n          />\r\n        </div>\r\n        <div>\r\n          <button type=\"submit\">add</button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PersonForm;\r\n","import React from \"react\";\r\n\r\nconst Persons = ({ persons, searchResult, handleDeletePerson }) => {\r\n  const rows = () => {\r\n    if (searchResult) {\r\n      if (searchResult.length) {\r\n        return searchResult.map((person) => (\r\n          <li key={person.name}>\r\n            {person.name} {person.number}\r\n          </li>\r\n        ));\r\n      } else {\r\n        return <li>No matching search results</li>;\r\n      }\r\n    } else {\r\n      return persons.map((person) => (\r\n        <li key={person.id}>\r\n          {person.name} {person.number}{\" \"}\r\n          <button onClick={() => handleDeletePerson(person)}>delete</button>\r\n        </li>\r\n      ));\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <ul style={{ listStyle: \"none\", padding: 0 }}>{rows()}</ul>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Persons;\r\n","import axios from \"axios\";\r\nconst baseUrl = \"/api/persons\";\r\n\r\nconst getAll = () => {\r\n  const request = axios.get(baseUrl);\r\n  return request.then((response) => response.data);\r\n};\r\n\r\nconst create = (newObject) => {\r\n  const request = axios.post(baseUrl, newObject);\r\n  return request.then((response) => response.data);\r\n};\r\n\r\nconst remove = (id) => {\r\n  const request = axios.delete(`${baseUrl}/${id}`);\r\n  return request.then((response) => response);\r\n};\r\n\r\nconst update = (id, newObject) => {\r\n  const request = axios.put(`${baseUrl}/${id}`, newObject);\r\n  return request.then((response) => response.data);\r\n};\r\n\r\nexport default { getAll, create, remove, update };\r\n","import React from \"react\";\r\n\r\nconst Notification = ({ message }) => {\r\n  //console.log(\"message: \", message);\r\n  if (message === null) {\r\n    return null;\r\n  } else if (message.type === \"success\") {\r\n    return <div className=\"success\">{message.content}</div>;\r\n  } else if (message.type === \"error\") {\r\n    return <div className=\"error\">{message.content}</div>;\r\n  }\r\n};\r\n\r\nexport default Notification;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport Filter from \"./components/Filter\";\r\nimport PersonForm from \"./components/PersonForm\";\r\nimport Persons from \"./components/Persons\";\r\nimport personService from \"./services/persons\";\r\nimport Notification from \"./components/Notification\";\r\n\r\nconst App = () => {\r\n  const [persons, setPersons] = useState([]);\r\n  const [newName, setNewName] = useState(\"\");\r\n  const [newNumber, setNewNumber] = useState(\"\");\r\n  const [searchResult, setSearchResult] = useState(null);\r\n  const [message, setMessage] = useState(null);\r\n\r\n  useEffect(() => {\r\n    personService.getAll().then((initialPersons) => {\r\n      setPersons(initialPersons);\r\n    });\r\n  }, []);\r\n\r\n  const showMessage = (message) => {\r\n    setMessage(message);\r\n    setTimeout(() => {\r\n      setMessage(null);\r\n    }, 5000);\r\n  };\r\n\r\n  const addPerson = (event) => {\r\n    event.preventDefault();\r\n\r\n    const personObject = {\r\n      name: newName,\r\n      number: newNumber,\r\n    };\r\n\r\n    const isFound = persons.some(\r\n      (person) => person.name.toLowerCase() === newName.toLowerCase()\r\n    );\r\n\r\n    const toUpdate = persons.filter(\r\n      (person) => person.name.toLowerCase() === newName.toLowerCase()\r\n    );\r\n\r\n    const addNewNumber = () => {\r\n      const changeNumberObject = {\r\n        name: toUpdate[0].name,\r\n        number: personObject.number,\r\n      };\r\n      console.log(\"changedNumber: \", changeNumberObject);\r\n\r\n      if (\r\n        window.confirm(\r\n          `${changeNumberObject.name} is already added to phonebook, replace the old number with a new one?`\r\n        )\r\n      ) {\r\n        const idForUpdate = toUpdate[0].id;\r\n        personService\r\n          .update(idForUpdate, changeNumberObject)\r\n          .then((returnedPerson) => {\r\n            console.log(\"returned person: \", returnedPerson);\r\n            setPersons(\r\n              persons.map((person) => {\r\n                //console.log(\"person: \", person);\r\n                return person.id !== returnedPerson.id\r\n                  ? person\r\n                  : returnedPerson;\r\n              })\r\n            );\r\n            showMessage({\r\n              type: \"success\",\r\n              content: `Changed ${returnedPerson.name}'s number`,\r\n            });\r\n          })\r\n          .catch((error) => {\r\n            console.log(\"error: \", error.response.data.error);\r\n            const errorMessage = error.response.data\r\n              ? error.response.data.error\r\n              : \"something went wrong\";\r\n            showMessage({\r\n              type: \"error\",\r\n              content: errorMessage,\r\n            });\r\n          });\r\n      }\r\n    };\r\n\r\n    const addPersonObject = () => {\r\n      console.log(\"personObject: \", personObject);\r\n\r\n      personService\r\n        .create(personObject)\r\n        .then((returnedPerson) => {\r\n          console.log(\"returned person:\", returnedPerson);\r\n          setPersons(persons.concat(returnedPerson));\r\n          showMessage({\r\n            type: \"success\",\r\n            content: `Added ${returnedPerson.name}`,\r\n          });\r\n        })\r\n        .catch((error) => {\r\n          console.log(\"error: \", error.response.data.error);\r\n          const errorMessage = error.response.data\r\n            ? error.response.data.error\r\n            : \"something went wrong\";\r\n          showMessage({\r\n            type: \"error\",\r\n            content: errorMessage,\r\n          });\r\n          setPersons(persons.filter((person) => person.id !== personObject.id));\r\n        });\r\n    };\r\n\r\n    isFound ? addNewNumber() : addPersonObject();\r\n\r\n    //console.log(\"persons: \", persons);\r\n    //console.log(\"message is: \", message);\r\n\r\n    setNewName(\"\");\r\n    setNewNumber(\"\");\r\n  };\r\n\r\n  const handleSearch = (event) => {\r\n    console.log(\"Searching for:\", event.target.value);\r\n    const searchTerm = event.target.value;\r\n    setSearchResult(\r\n      persons.filter((person) =>\r\n        person.name.toLowerCase().includes(searchTerm.toLowerCase())\r\n      )\r\n    );\r\n  };\r\n\r\n  const handleSearchStop = (event) => {\r\n    console.log(\"searching stopped\");\r\n    setSearchResult(null);\r\n  };\r\n\r\n  const handleNameChange = (event) => {\r\n    //console.log(event.target.value);\r\n    setNewName(event.target.value);\r\n  };\r\n\r\n  const handleNumberChange = (event) => {\r\n    //console.log(event.target.value);\r\n    setNewNumber(event.target.value);\r\n  };\r\n\r\n  const handleDeletePerson = (personToDelete) => {\r\n    console.log(\"delete button pressed\", personToDelete);\r\n    if (window.confirm(`Delete ${personToDelete.name}?`)) {\r\n      personService\r\n        .remove(personToDelete.id)\r\n        .then((deletedPerson) => {\r\n          console.log(\"person deleted\", deletedPerson);\r\n          setPersons(\r\n            persons.filter((person) => person.name !== personToDelete.name)\r\n          );\r\n          showMessage({\r\n            type: \"success\",\r\n            content: `Deleted ${personToDelete.name}`,\r\n          });\r\n        })\r\n        .catch((error) => {\r\n          console.log(\"error: \", error.response.data.error);\r\n          const errorMessage = error.response.data\r\n            ? error.response.data.error\r\n            : \"something went wrong\";\r\n          showMessage({\r\n            type: \"error\",\r\n            content: errorMessage,\r\n          });\r\n          setPersons(\r\n            persons.filter((person) => person.id !== personToDelete.id)\r\n          );\r\n        });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <h2>Phonebook</h2>\r\n      <Notification message={message} />\r\n      <Filter handleSearch={handleSearch} handleSearchStop={handleSearchStop} />\r\n      <h2>add a new</h2>\r\n      <PersonForm\r\n        addPerson={addPerson}\r\n        newName={newName}\r\n        handleNameChange={handleNameChange}\r\n        newNumber={newNumber}\r\n        handleNumberChange={handleNumberChange}\r\n      />\r\n      <h2>Numbers</h2>\r\n      <Persons\r\n        persons={persons}\r\n        searchResult={searchResult}\r\n        handleDeletePerson={handleDeletePerson}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default App;\r\n\r\n/*\r\n\r\nconst showPopup = () =>\r\n      window.alert(`No duplicates! \\n${newName} is already added to phonebook`);\r\n\r\n\r\n    */\r\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport './index.css'\nimport App from './App'\n\nReactDOM.render(<App />, document.getElementById('root'))\n\n"],"sourceRoot":""}