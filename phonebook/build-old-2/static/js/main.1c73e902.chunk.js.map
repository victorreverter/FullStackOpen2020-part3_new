{"version":3,"sources":["Filter.js","Form.js","Persons.js","Notification.js","services/agenda.js","index.js"],"names":["Filter","filterHandle","id","onChange","Form","nameHandle","numberHandle","clickHandle","onClick","type","Persons","personsHandled","deleteHandle","handlePersons","map","item","key","name","number","Notification","message","status","className","baseUrl","axios","get","then","response","data","newObject","post","delPersonID","delPerson","delete","persons","newNum","put","App","useState","setPersons","newName","setNewName","newNumber","setNewNumber","filterArr","setNewFilterArr","notification","setNotification","notificationStatus","setNotificationStatus","useEffect","console","log","agendaService","initialPersons","event","preventDefault","filteredRslt","filter","person","includes","target","value","newPerson","Math","random","some","alert","mssg","window","confirm","returnedDat","document","querySelector","newArr","setTimeout","returnedPersons","concat","delItem","n","undelItem","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.1c73e902.chunk.js","sourcesContent":["import React from 'react';\r\n\r\nconst Filter = ({filterHandle}) => {\r\n    return (\r\n        <>\r\n            <form>\r\n                <div>\r\n                    Filter shown with: <input id=\"filterInput\" onChange={filterHandle} />\r\n                </div>\r\n            </form>\r\n        </>\r\n    )\r\n};\r\n\r\nexport default Filter;","import React from 'react';\r\n\r\nconst Form = ({nameHandle, numberHandle, clickHandle}) => {\r\n    return (\r\n        <>\r\n            <form>\r\n                <div>\r\n                    name: <input id=\"nameInput\" onChange={nameHandle} />\r\n                </div>\r\n                <div>\r\n                    number: <input id=\"numberInput\" onChange={numberHandle} />\r\n                </div>\r\n                <div>\r\n                    <button onClick={clickHandle} type=\"submit\">\r\n                        add\r\n                    </button>\r\n                </div>\r\n            </form>\r\n        </>\r\n    )\r\n};\r\n\r\nexport default Form;","import React from 'react';\r\n\r\nconst Persons = ({ personsHandled, deleteHandle }) => {\r\n    const handlePersons = personsHandled.map((item) => {\r\n        const manageDelete = () => deleteHandle(item.id);\r\n        // console.log(deleteHandle(item.id));\r\n\r\n        return (\r\n          <h4 key={item.id}>\r\n            {item.name} {item.number}\r\n            <button key={item.id} type=\"text\" onClick={manageDelete}>\r\n              Delete\r\n            </button>\r\n          </h4>\r\n        );\r\n    });\r\n\r\n    return (\r\n        <>\r\n          {handlePersons}\r\n        </>\r\n    )\r\n};\r\n\r\nexport default Persons;","import React from \"react\";\r\n\r\nconst Notification = ({ message, status }) => {\r\n  if (message === null) {\r\n    return null;\r\n  }\r\n\r\n  return <div className={status} >{message}</div>;\r\n};\r\n\r\nexport default Notification;\r\n","import axios from \"axios\";\r\n// const baseUrl = \"http://localhost:3001/persons\";\r\n// const baseUrl = \"http://localhost:3001/api/persons\";\r\n// const baseUrl = \"https://phonebook-app-victorreverter.herokuapp.com/api/persons\";\r\nconst baseUrl = '/api/persons';\r\n\r\nconst getAll = () => {\r\n  const request = axios.get(baseUrl);\r\n  return request.then((response) => response.data);\r\n};\r\n\r\nconst create = (newObject) => {\r\n  const request = axios.post(baseUrl, newObject);\r\n  return request.then((response) => response.data);\r\n};\r\n\r\nconst deletetion = (delPersonID, delPerson) => {\r\n    return axios.delete(`${baseUrl}/${delPersonID}`, { persons: delPerson })\r\n};\r\n\r\nconst numberUpdate = (id, newNum) => {\r\n  // const request = axios.put(`${baseUrl}/${id}`, {name: id, number: newNum});\r\n  // return request.then((response) => response.data);\r\n  const request = axios.put(`${baseUrl}/${id}`, { name: id, number: newNum });\r\n  return request.then((response) => response.data);\r\n};\r\n\r\nexport default { getAll, create, deletetion, numberUpdate};","import React, {useState, useEffect} from 'react';\nimport ReactDOM from 'react-dom';\n\nimport Filter from './Filter';\nimport Form from './Form';\nimport Persons from './Persons';\nimport Notification from \"./Notification\";\nimport './index.css';\n\nimport agendaService from \"./services/agenda\";\n\n// import axios from \"axios\";\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  const [newName, setNewName] = useState(\"\");\n  const [newNumber, setNewNumber] = useState(\"\");\n  const [filterArr, setNewFilterArr] = useState([...persons]);\n  const [notification, setNotification] = useState(\"\");\n  const [notificationStatus, setNotificationStatus] = useState(\"\");\n\n  useEffect(() => {\n    console.log('effect');\n    // axios.get(\"http://localhost:3001/persons\").then(response => {\n    //   console.log('promise fulfilled')\n    //   setPersons(response.data);\n    //   setNewFilterArr(response.data);\n    // })\n    agendaService.getAll().then((initialPersons) => {\n      setPersons(initialPersons);\n      setNewFilterArr(initialPersons);\n    });\n  }, [])\n\n  const handleFilter = (event) => {\n    event.preventDefault();\n    // console.log(event.target.value);\n    // console.log(persons);\n    const filteredRslt = persons.filter((person) => {\n      return person[\"name\"].includes(event.target.value);\n    });\n\n    setNewFilterArr(filteredRslt);\n    // console.log(filteredRslt);\n  };\n\n  const handleChangeName = (event) => {\n    // console.log(event.target.value);\n    // event.preventDefault();\n    setNewName(event.target.value);\n  };\n\n  const handleChangeNumber = (event) => {\n    // console.log(event.target.value);\n    // event.preventDefault();\n    setNewNumber(event.target.value);\n  };\n\n  // const generateId = () => {\n  //     const maxId = persons.length > 0 ?\n  //         Math.max(...persons.map(n => n.id)) :\n  //         0;\n  //     return maxId + 1;\n  // }\n\n  const handleClick = (event) => {\n    // console.log(...persons);\n    // console.log([...persons,{name: newName}]);\n    event.preventDefault();\n\n    const newPerson = {\n      name: newName,\n      number: newNumber,\n      // id: generateId(),\n      id: Math.random() * 100000\n    };\n\n    console.log(newPerson);\n\n    if (persons.some((person) => person.name === newName && persons.some((person) => person.number === newNumber))) {\n      \n      alert(`${newName} is already added to phonebook`);\n\n    } else if (persons.some((person) => person.name === newName) && persons.some((person) => person.number !== newNumber)) {\n      \n      const mssg = `${newName} is already added to phonebook but the number is different. Do you want update the number?`;\n      \n      if (window.confirm(mssg)){\n        agendaService.numberUpdate(newName, newNumber).then((returnedDat) => {\n          document.querySelector(\"#nameInput\").value = \"\";\n          document.querySelector(\"#numberInput\").value = \"\";\n          setNewName(\"\");\n          setNewNumber(\"\");\n\n          // console.log(persons);\n\n          // const newArr = persons.map((item) =>\n          //   item.id === returnedDat.id\n          //     ? { ...item, number: returnedDat.number }\n          //     : item\n          // );\n\n          const newArr = persons.map((item) =>\n            item.name === returnedDat.name\n              ? { ...item, number: returnedDat.number }\n              : item\n          );\n\n          // console.log(persons);\n          // console.log(newArr);\n\n          setPersons(newArr);\n          setNewFilterArr(newArr);\n        });\n\n        // Added New Number Successfull\n        setNotification(`The number of ${newName} has been modified`);\n        setNotificationStatus(\"num-modified\");\n        setTimeout(() => {\n          setNotification(null);\n        }, 5000);\n      }\n\n    } else {\n      // console.log(\"didn't exists\");\n      document.querySelector(\"#nameInput\").value = \"\";\n      document.querySelector(\"#numberInput\").value = \"\";\n      setPersons([...persons, newPerson]);\n      setNewFilterArr([...persons, newPerson]);\n\n      // console.log(persons);\n\n      agendaService.create(newPerson).then((returnedPersons) => {\n        // console.log(returnedPersons);\n        setPersons(persons.concat(returnedPersons));\n        setNewName(\"\");\n        setNewNumber(\"\");\n      });\n\n      // Added Notification Successfull\n      setNotification(`Added ${newName}`);\n      setNotificationStatus('successfull');\n      setTimeout(() => {\n        setNotification(null);\n      }, 5000);\n    }\n  };\n\n  const handleDelete = (id) => {\n    const delItem = persons.filter((n) => n.id === id);\n    const undelItem = persons.filter((n) => n.id !== id);\n\n    const message = `Do you really want to delete ${id}?`;\n    \n    // window.confirm(message);\n\n    if(window.confirm(message)) {\n      // window.prompt(\"You failed us\");\n      agendaService.deletetion(id, delItem);\n      setPersons(undelItem);\n      setNewFilterArr(undelItem);\n    }\n  };\n\n  return (\n    <div className=\"wrap\">\n      <h2>Phonebook</h2>\n\n      <Notification message={notification} status={notificationStatus} />\n\n      <Filter filterHandle={handleFilter} />\n\n      <h2>Add a New</h2>\n\n      <Form\n        nameHandle={handleChangeName}\n        numberHandle={handleChangeNumber}\n        clickHandle={handleClick}\n      />\n\n      <h2>Numbers</h2>\n\n      <Persons personsHandled={filterArr} deleteHandle={handleDelete} />\n\n      <div>debug: {newName}</div>\n    </div>\n  );\n};\n\nReactDOM.render(<App />, document.getElementById(\"root\"));"],"sourceRoot":""}